<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>celery &mdash; Celery 2.6.0rc4 documentation</title>
    
    <link rel="stylesheet" href="../_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/issuetracker.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.0rc4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Celery 2.6.0rc4 documentation" href="../index.html" />
    <link rel="up" title="API Reference" href="index.html" />
    <link rel="next" title="celery.app" href="celery.app.html" />
    <link rel="prev" title="API Reference" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="celery.app.html" title="celery.app"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Celery 2.6.0rc4 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
<div class="deck">

    <h2>Development documentation has MOVED!</h2>
    <p>
    Go to the
    <a href="http://celery.github.com/celery/reference/celery.html">new location for this page</a>.

</div>
    <div class="section" id="celery">
<h1>celery<a class="headerlink" href="#celery" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#application" id="id1">Application</a></li>
<li><a class="reference internal" href="#grouping-tasks" id="id2">Grouping Tasks</a></li>
<li><a class="reference internal" href="#proxies" id="id3">Proxies</a></li>
</ul>
</div>
<div class="section" id="application">
<h2><a class="toc-backref" href="#id1">Application</a><a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt>
<tt class="descname">Celery(main=None, broker=&quot;amqp://guest:guest&#64;localhost:5672//&quot;,</tt></dt>
<dt>
<tt class="descname">loader=&quot;app&quot;, backend=None)</tt></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>main</strong> &#8211; Name of the main module if running as <cite>__main__</cite>.</li>
<li><strong>broker</strong> &#8211; URL of the default broker used.</li>
<li><strong>loader</strong> &#8211; The loader class, or the name of the loader class to use.
Default is <a class="reference internal" href="celery.loaders.app.html#celery.loaders.app.AppLoader" title="celery.loaders.app.AppLoader"><tt class="xref py py-class docutils literal"><span class="pre">celery.loaders.app.AppLoader</span></tt></a>.</li>
<li><strong>backend</strong> &#8211; The result store backend class, or the name of the
backend class to use. Default is the value of the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_RESULT_BACKEND"><tt class="xref std std-setting docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span></tt></a> setting.</li>
<li><strong>amqp</strong> &#8211; AMQP object or class name.</li>
<li><strong>events</strong> &#8211; Events object or class name.</li>
<li><strong>log</strong> &#8211; Log object or class name.</li>
<li><strong>control</strong> &#8211; Control object or class name.</li>
<li><strong>set_as_current</strong> &#8211; Make this the global current app.</li>
<li><strong>tasks</strong> &#8211; A task registry or the name of a registry class.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="main">
<tt class="descname">main</tt><a class="headerlink" href="#main" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the <cite>__main__</cite> module.  Required for standalone scripts.</p>
<p>If set this will be used instead of <cite>__main__</cite> when automatically
generating task names.</p>
</dd></dl>

<dl class="attribute">
<dt id="conf">
<tt class="descname">conf</tt><a class="headerlink" href="#conf" title="Permalink to this definition">¶</a></dt>
<dd><p>Current configuration.</p>
</dd></dl>

<dl class="attribute">
<dt id="current_task">
<tt class="descname">current_task</tt><a class="headerlink" href="#current_task" title="Permalink to this definition">¶</a></dt>
<dd><p>The instance of the task that is being executed, or <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="amqp">
<tt class="descname">amqp</tt><a class="headerlink" href="#amqp" title="Permalink to this definition">¶</a></dt>
<dd><p>AMQP related functionality: <a class="reference internal" href="celery.app.amqp.html#celery.app.amqp.AMQP" title="celery.app.amqp.AMQP"><tt class="xref py py-class docutils literal"><span class="pre">amqp</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="backend">
<tt class="descname">backend</tt><a class="headerlink" href="#backend" title="Permalink to this definition">¶</a></dt>
<dd><p>Current backend instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="loader">
<tt class="descname">loader</tt><a class="headerlink" href="#loader" title="Permalink to this definition">¶</a></dt>
<dd><p>Current loader instance.</p>
</dd></dl>

<dl class="attribute">
<dt id="control">
<tt class="descname">control</tt><a class="headerlink" href="#control" title="Permalink to this definition">¶</a></dt>
<dd><p>Remote control: <a class="reference internal" href="celery.app.control.html#celery.app.control.Control" title="celery.app.control.Control"><tt class="xref py py-class docutils literal"><span class="pre">control</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="events">
<tt class="descname">events</tt><a class="headerlink" href="#events" title="Permalink to this definition">¶</a></dt>
<dd><p>Consuming and sending events: <a class="reference internal" href="celery.events.html#celery.events.Events" title="celery.events.Events"><tt class="xref py py-class docutils literal"><span class="pre">events</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="log">
<tt class="descname">log</tt><a class="headerlink" href="#log" title="Permalink to this definition">¶</a></dt>
<dd><p>Logging: <a class="reference internal" href="celery.app.log.html#celery.app.log.Logging" title="celery.app.log.Logging"><tt class="xref py py-class docutils literal"><span class="pre">log</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="tasks">
<tt class="descname">tasks</tt><a class="headerlink" href="#tasks" title="Permalink to this definition">¶</a></dt>
<dd><p>Task registry.</p>
</dd></dl>

<dl class="attribute">
<dt id="pool">
<tt class="descname">pool</tt><a class="headerlink" href="#pool" title="Permalink to this definition">¶</a></dt>
<dd><p>Broker connection pool: <tt class="xref py py-class docutils literal"><span class="pre">pool</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="Task">
<tt class="descname">Task</tt><a class="headerlink" href="#Task" title="Permalink to this definition">¶</a></dt>
<dd><p>Base task class for this app.</p>
</dd></dl>

<dl class="method">
<dt id="bugreport">
<tt class="descname">bugreport</tt><big>(</big><big>)</big><a class="headerlink" href="#bugreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a string with information useful for the Celery core
developers when reporting a bug.</p>
</dd></dl>

<dl class="method">
<dt id="config_from_object">
<tt class="descname">config_from_object</tt><big>(</big><em>obj</em>, <em>silent=False</em><big>)</big><a class="headerlink" href="#config_from_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads configuration from object, where object is either
an object or the name of a module to import.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>silent</strong> &#8211; If true then import errors will be ignored.</td>
</tr>
</tbody>
</table>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="s">&quot;myapp.celeryconfig&quot;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">myapp</span> <span class="kn">import</span> <span class="n">celeryconfig</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_object</span><span class="p">(</span><span class="n">celeryconfig</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="config_from_envvar">
<tt class="descname">config_from_envvar</tt><big>(</big><em>variable_name</em>, <em>silent=False</em><big>)</big><a class="headerlink" href="#config_from_envvar" title="Permalink to this definition">¶</a></dt>
<dd><p>Read configuration from environment variable.</p>
<p>The value of the environment variable must be the name
of a module to import.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&quot;CELERY_CONFIG_MODULE&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;myapp.celeryconfig&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">celery</span><span class="o">.</span><span class="n">config_from_envvar</span><span class="p">(</span><span class="s">&quot;CELERY_CONFIG_MODULE&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="config_from_cmdline">
<tt class="descname">config_from_cmdline</tt><big>(</big><em>argv</em>, <em>namespace=&quot;celery&quot;</em><big>)</big><a class="headerlink" href="#config_from_cmdline" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses argv for configuration strings.</p>
<p>Configuration strings must be located after a &#8216;&#8211;&#8217; sequence,
e.g.:</p>
<div class="highlight-python"><pre>program arg1 arg2 -- celeryd.concurrency=10</pre>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>namespace</strong> &#8211; Default namespace if omitted.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="start">
<tt class="descname">start</tt><big>(</big><em>argv=None</em><big>)</big><a class="headerlink" href="#start" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celery</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.argv" title="(in Python v3.3)"><tt class="xref py py-data docutils literal"><span class="pre">sys.argv</span></tt></a> if <cite>argv</cite> is not specified.</p>
</dd></dl>

<dl class="method">
<dt id="task">
<tt class="descname">task</tt><big>(</big><em>fun</em>, <em>**options</em><big>)</big><a class="headerlink" href="#task" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to create a task class out of any callable.</p>
<p><strong>Examples:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@task</span>
<span class="k">def</span> <span class="nf">refresh_feed</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<p>with setting extra options:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@task</span><span class="p">(</span><span class="n">exchange</span><span class="o">=</span><span class="s">&quot;feeds&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">refresh_feed</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">return</span> <span class="o">...</span>
</pre></div>
</div>
<div class="admonition-app-binding admonition">
<p class="first admonition-title">App Binding</p>
<p>For custom apps the task decorator returns proxy
objects, so that the act of creating the task is not performed
until the task is used or the task registry is accessed.</p>
<p class="last">If you are depending on binding to be deferred, then you must
not access any attributes on the returned object until the
application is fully set up (finalized).</p>
</div>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">send_task(name, args=(), kwargs={}, countdown=None,</tt></dt>
<dt>
<tt class="descname">eta=None, task_id=None, publisher=None, connection=None,</tt></dt>
<dt>
<tt class="descname">result_cls=AsyncResult, expires=None, queues=None, **options)</tt></dt>
<dd><p>Send task by <strong>name</strong>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; Name of task to execute (e.g. <cite>&#8220;tasks.add&#8221;</cite>).</li>
<li><strong>result_cls</strong> &#8211; Specify custom result class. Default is
using <a class="reference internal" href="#AsyncResult" title="AsyncResult"><tt class="xref py py-meth docutils literal"><span class="pre">AsyncResult()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Otherwise supports the same arguments as <tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="AsyncResult">
<tt class="descname">AsyncResult</tt><a class="headerlink" href="#AsyncResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new result instance. See <a class="reference internal" href="celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><tt class="xref py py-class docutils literal"><span class="pre">AsyncResult</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="TaskSetResult">
<tt class="descname">TaskSetResult</tt><a class="headerlink" href="#TaskSetResult" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new taskset result instance.
See <a class="reference internal" href="celery.result.html#celery.result.TaskSetResult" title="celery.result.TaskSetResult"><tt class="xref py py-class docutils literal"><span class="pre">TaskSetResult</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="worker_main">
<tt class="descname">worker_main</tt><big>(</big><em>argv=None</em><big>)</big><a class="headerlink" href="#worker_main" title="Permalink to this definition">¶</a></dt>
<dd><p>Run <strong class="program">celeryd</strong> using <cite>argv</cite>.</p>
<p>Uses <a class="reference external" href="http://docs.python.org/dev/library/sys.html#sys.argv" title="(in Python v3.3)"><tt class="xref py py-data docutils literal"><span class="pre">sys.argv</span></tt></a> if <cite>argv</cite> is not specified.&#8221;&#8220;&#8221;</p>
</dd></dl>

<dl class="attribute">
<dt id="Worker">
<tt class="descname">Worker</tt><a class="headerlink" href="#Worker" title="Permalink to this definition">¶</a></dt>
<dd><p>Worker application. See <a class="reference internal" href="celery.apps.worker.html#celery.apps.worker.Worker" title="celery.apps.worker.Worker"><tt class="xref py py-class docutils literal"><span class="pre">Worker</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="WorkController">
<tt class="descname">WorkController</tt><a class="headerlink" href="#WorkController" title="Permalink to this definition">¶</a></dt>
<dd><p>Embeddable worker. See <a class="reference internal" href="../internals/reference/celery.worker.html#celery.worker.WorkController" title="celery.worker.WorkController"><tt class="xref py py-class docutils literal"><span class="pre">WorkController</span></tt></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="Beat">
<tt class="descname">Beat</tt><a class="headerlink" href="#Beat" title="Permalink to this definition">¶</a></dt>
<dd><p>Celerybeat scheduler application.
See <a class="reference internal" href="celery.apps.beat.html#celery.apps.beat.Beat" title="celery.apps.beat.Beat"><tt class="xref py py-class docutils literal"><span class="pre">Beat</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descname">broker_connection(url=&quot;amqp://guest:guest&#64;localhost:5672//&quot;,</tt></dt>
<dt>
<tt class="descname">ssl=False, transport_options={})</tt></dt>
<dd><p>Establish a connection to the message broker.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> &#8211; Either the URL or the hostname of the broker to use.</li>
<li><strong>hostname</strong> &#8211; URL, Hostname/IP-address of the broker.
If an URL is used, then the other argument below will
be taken from the URL instead.</li>
<li><strong>userid</strong> &#8211; Username to authenticate as.</li>
<li><strong>password</strong> &#8211; Password to authenticate with</li>
<li><strong>virtual_host</strong> &#8211; Virtual host to use (domain).</li>
<li><strong>port</strong> &#8211; Port to connect to.</li>
<li><strong>ssl</strong> &#8211; Defaults to the <a class="reference internal" href="../configuration.html#std:setting-BROKER_USE_SSL"><tt class="xref std std-setting docutils literal"><span class="pre">BROKER_USE_SSL</span></tt></a> setting.</li>
<li><strong>transport</strong> &#8211; defaults to the <a class="reference internal" href="../configuration.html#std:setting-BROKER_TRANSPORT"><tt class="xref std std-setting docutils literal"><span class="pre">BROKER_TRANSPORT</span></tt></a>
setting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>:returns <a class="reference external" href="http://kombu.readthedocs.org/en/latest/reference/kombu.connection.html#kombu.connection.BrokerConnection" title="(in Kombu v2.2)"><tt class="xref py py-class docutils literal"><span class="pre">kombu.connection.BrokerConnection</span></tt></a>:</p>
</dd></dl>

<dl class="method">
<dt id="default_connection">
<tt class="descname">default_connection</tt><big>(</big><em>connection=None</em><big>)</big><a class="headerlink" href="#default_connection" title="Permalink to this definition">¶</a></dt>
<dd><p>For use within a with-statement to get a connection from the pool
if one is not already provided.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>connection</strong> &#8211; If not provided, then a connection will be
acquired from the connection pool.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="mail_admins">
<tt class="descname">mail_admins</tt><big>(</big><em>subject</em>, <em>body</em>, <em>fail_silently=False</em><big>)</big><a class="headerlink" href="#mail_admins" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends an email to the admins in the <a class="reference internal" href="../configuration.html#std:setting-ADMINS"><tt class="xref std std-setting docutils literal"><span class="pre">ADMINS</span></tt></a> setting.</p>
</dd></dl>

<dl class="method">
<dt id="select_queues">
<tt class="descname">select_queues</tt><big>(</big><em>queues=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#select_queues" title="Permalink to this definition">¶</a></dt>
<dd><p>Select a subset of queues, where queues must be a list of queue
names to keep.</p>
</dd></dl>

<dl class="method">
<dt id="now">
<tt class="descname">now</tt><big>(</big><big>)</big><a class="headerlink" href="#now" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current time and date as a <a class="reference external" href="http://docs.python.org/dev/library/datetime.html#datetime.datetime" title="(in Python v3.3)"><tt class="xref py py-class docutils literal"><span class="pre">datetime</span></tt></a>
object.</p>
</dd></dl>

<dl class="method">
<dt id="set_current">
<tt class="descname">set_current</tt><big>(</big><big>)</big><a class="headerlink" href="#set_current" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes this the current app for this thread.</p>
</dd></dl>

<dl class="method">
<dt id="finalize">
<tt class="descname">finalize</tt><big>(</big><big>)</big><a class="headerlink" href="#finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalizes the app by loading built-in tasks,
and evaluating pending task decorators</p>
</dd></dl>

<dl class="attribute">
<dt id="Pickler">
<tt class="descname">Pickler</tt><a class="headerlink" href="#Pickler" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class used to pickle this application.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grouping-tasks">
<h2><a class="toc-backref" href="#id2">Grouping Tasks</a><a class="headerlink" href="#grouping-tasks" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="group">
<em class="property">class </em><tt class="descname">group</tt><big>(</big><em>tasks=</em><span class="optional">[</span><span class="optional">]</span><big>)</big><a class="headerlink" href="#group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a group of tasks to be executed in parallel.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">group</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">[4, 8]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">apply_async</span></tt> method returns <a class="reference internal" href="celery.result.html#celery.result.TaskSetResult" title="celery.result.TaskSetResult"><tt class="xref py py-class docutils literal"><span class="pre">TaskSetResult</span></tt></a>.</p>
</dd></dl>

<dl class="class">
<dt id="chain">
<em class="property">class </em><tt class="descname">chain</tt><big>(</big><em>*tasks</em><big>)</big><a class="headerlink" href="#chain" title="Permalink to this definition">¶</a></dt>
<dd><p>Chains tasks together, so that each tasks follows each other
by being applied as a callback of the previous task.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chain</span><span class="p">(</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span><span class="o">.</span><span class="n">apply_async</span><span class="p">()</span>
</pre></div>
</div>
<p>is effectively <img class="math" src="../_images/math/d9026d633628a5785ff6598e44deabc7988e53c7.png" alt="(2 + 2) + 4)"/>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">8</span>
</pre></div>
</div>
<p>Applying a chain will return the result of the last task in the chain.
You can get to the other tasks by following the <tt class="docutils literal"><span class="pre">result.parent</span></tt>&#8216;s:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">4</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="chord">
<em class="property">class </em><tt class="descname">chord</tt><big>(</big><em>header)(body</em><big>)</big><a class="headerlink" href="#chord" title="Permalink to this definition">¶</a></dt>
<dd><p>A chord consists of a header and a body.
The header is a group of tasks that must complete before the callback is
called.  A chord is essentially a callback for a group of tasks.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">chord</span><span class="p">([</span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">)])(</span><span class="n">sum_task</span><span class="o">.</span><span class="n">s</span><span class="p">())</span>
</pre></div>
</div>
<p>is effectively <img class="math" src="../_images/math/0e9aea08df589fd6f4f3e4d692b44e10d02d4b7b.png" alt="\Sigma ((2 + 2) + (4 + 4))"/>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
<span class="go">12</span>
</pre></div>
</div>
<p>The body is applied with the return values of all the header
tasks as a list.</p>
</dd></dl>

<dl class="class">
<dt id="subtask">
<em class="property">class </em><tt class="descname">subtask</tt><big>(</big><em>task=None</em>, <em>args=()</em>, <em>kwargs={}</em>, <em>options={}</em><big>)</big><a class="headerlink" href="#subtask" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes the arguments and execution options for a single task invocation.</p>
<p>Used as the parts in a <a class="reference internal" href="#group" title="group"><tt class="xref py py-class docutils literal"><span class="pre">group</span></tt></a> or to safely pass
tasks around as callbacks.</p>
<p>Subtasks can also be created from tasks:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">subtask</span><span class="p">(</span><span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{},</span> <span class="n">options</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>or the <tt class="docutils literal"><span class="pre">.s()</span></tt> shortcut:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">add</span><span class="o">.</span><span class="n">s</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>task</strong> &#8211; Either a task class/instance, or the name of a task.</li>
<li><strong>args</strong> &#8211; Positional arguments to apply.</li>
<li><strong>kwargs</strong> &#8211; Keyword arguments to apply.</li>
<li><strong>options</strong> &#8211; Additional options to <tt class="xref py py-meth docutils literal"><span class="pre">Task.apply_async()</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Note that if the first argument is a <a class="reference external" href="http://docs.python.org/dev/library/stdtypes.html#dict" title="(in Python v3.3)"><tt class="xref py py-class docutils literal"><span class="pre">dict</span></tt></a>, the other
arguments will be ignored and the values in the dict will be used
instead.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="n">subtask</span><span class="p">(</span><span class="s">&quot;tasks.add&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subtask</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">{&quot;task&quot;: &quot;tasks.add&quot;, args=(2, 2), kwargs={}, options={}}</span>
</pre></div>
</div>
<dl class="method">
<dt id="subtask.delay">
<tt class="descname">delay</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#subtask.delay" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut to <a class="reference internal" href="#subtask.apply_async" title="subtask.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.apply_async">
<tt class="descname">apply_async</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>**options</em><big>)</big><a class="headerlink" href="#subtask.apply_async" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply this task asynchronously.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> &#8211; Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> &#8211; Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>See <tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.apply">
<tt class="descname">apply</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>**options</em><big>)</big><a class="headerlink" href="#subtask.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#subtask.apply_async" title="subtask.apply_async"><tt class="xref py py-meth docutils literal"><span class="pre">apply_async()</span></tt></a> but executes inline instead
of sending a task message.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.clone">
<tt class="descname">clone</tt><big>(</big><em>args=()</em>, <em>kwargs={}</em>, <em>**options</em><big>)</big><a class="headerlink" href="#subtask.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a copy of this subtask.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; Partial args to be prepended to the existing args.</li>
<li><strong>kwargs</strong> &#8211; Partial kwargs to be merged with the existing kwargs.</li>
<li><strong>options</strong> &#8211; Partial options to be merged with the existing
options.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="subtask.replace">
<tt class="descname">replace</tt><big>(</big><em>args=None</em>, <em>kwargs=None</em>, <em>options=None</em><big>)</big><a class="headerlink" href="#subtask.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace the args, kwargs or options set for this subtask.
These are only replaced if the selected is not <tt class="xref py py-const docutils literal"><span class="pre">None</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.link">
<tt class="descname">link</tt><big>(</big><em>other_subtask</em><big>)</big><a class="headerlink" href="#subtask.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if this task
executes successfully.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.link_error">
<tt class="descname">link_error</tt><big>(</big><em>other_subtask</em><big>)</big><a class="headerlink" href="#subtask.link_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a callback task to be applied if an error occurs
while executing this task.</p>
</dd></dl>

<dl class="method">
<dt id="subtask.set">
<tt class="descname">set</tt><big>(</big><em>**options</em><big>)</big><a class="headerlink" href="#subtask.set" title="Permalink to this definition">¶</a></dt>
<dd><p>Set arbitrary options (same as <tt class="docutils literal"><span class="pre">.options.update(...)</span></tt>).</p>
<p>This is a chaining method call (i.e. it returns itself).</p>
</dd></dl>

<dl class="method">
<dt id="subtask.flatten_links">
<tt class="descname">flatten_links</tt><big>(</big><big>)</big><a class="headerlink" href="#subtask.flatten_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives a recursive list of dependencies (unchain if you will,
but with links intact).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="proxies">
<h2><a class="toc-backref" href="#id3">Proxies</a><a class="headerlink" href="#proxies" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="current_app">
<tt class="descname">current_app</tt><a class="headerlink" href="#current_app" title="Permalink to this definition">¶</a></dt>
<dd><p>The currently set app for this thread.</p>
</dd></dl>

<dl class="data">
<dt>
<tt class="descname">current_task</tt></dt>
<dd><p>The task currently being executed
(only set in the worker, or when eager/apply is used).</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="http://cloud.github.com/downloads/ask/celery/celery_128.png" alt="Logo"/>
</a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">API Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="celery.app.html"
                        title="next chapter">celery.app</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/reference/celery.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="celery.app.html" title="celery.app"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="API Reference"
             >previous</a> |</li>
        <li><a href="../index.html">Celery 2.6.0rc4 documentation</a> &raquo;</li>
          <li><a href="index.html" >API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2012, Ask Solem &amp; Contributors.
    </div>
  </body>
</html>